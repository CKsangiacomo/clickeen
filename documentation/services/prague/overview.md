# Prague — Marketing & SEO Surface

STATUS: Runtime reality (this repo)
Created: 2024-12-27
Last updated: 2026-01-02

---

## 0) What Prague is (in this repo)

Prague is the marketing + SEO surface, implemented as an **Astro SSG** app deployed on **Cloudflare Pages**.

In this repo, Prague’s widget marketing content is sourced from **checked-in** files under `tokyo/widgets/*/pages/*.md` (not fetched from a remote Tokyo service).

At build time:

- Prague enumerates widgets by scanning `tokyo/widgets/*` (excluding `_*/` and `shared/`)
- Prague renders generic page templates under `prague/src/pages/**`
- Pages load and parse `tokyo/widgets/{widget}/pages/{page}.md` using a tiny deterministic parser (`prague/src/lib/markdown.ts`)

### Competitor patterns adopted

| Competitor | Pattern we steal | Our advantage |
|------------|------------------|---------------|
| **Elfsight** | Mega-menu categories, "Best Seller / Trending / New" badges, 97+ widgets scale | GTM Agent automates content at 100⁵ scale |
| **Common Ninja** | Stats strips ("1M+ widgets, 500K+ businesses"), "Made with" gallery | AI-generated, locale-aware |
| **Embeddable** | Use-case specificity (long-tail SEO), template counts, AI customization messaging | SDR Copilot reads your site, auto-generates content |

### Where we beat all three

| Their weakness | Our advantage |
|----------------|---------------|
| Generic customization | SDR Copilot writes content for you |
| AI is prompt-based (still work) | We read your site, auto-generate |
| No content intelligence | We personalize to ICP + locale |
| Manual, human-driven marketing | 100⁵ programmatic scale |
| Same templates for everyone | GTM Agent optimizes per locale/use-case |

### The 10X localization advantage

Competitors like [Elfsight](https://elfsight.com/ja/instagram-feed-instashow/examples/) translate the **page UI** but leave **widget examples in English**:

| Element | Elfsight | Clickeen |
|---------|----------|----------|
| Navigation | ✓ Localized | ✓ Localized |
| Page headings | ✓ Localized | ✓ Localized |
| CTA buttons | ✓ Localized | ✓ Localized |
| **Widget content in examples** | ❌ English only | ✓ **Fully localized** |

Japanese user on Elfsight: sees "Example 1: スライダー" but widget shows English content.

Japanese user on Clickeen: sees Japanese page AND Japanese widget content:
```json
{ "question": "返品ポリシーは何ですか？", "answer": "..." }
```

**Why we can do this:** Widget state is JSON. We translate JSON automatically. They'd have to manually create 50 versions of every widget instance.

---

## 1) The 100⁵ scale model

Prague generates pages from a combinatorial matrix:

| Dimension | Count | Source |
|-----------|-------|--------|
| **Widgets** | 100 | Tokyo widget registry |
| **Locales** | 50 | i18n catalogs |
| **Hubs (categories)** | varies | `tokyo/widgets/{widget}/pages/hubs/*.md` |
| **Spokes (platforms/niches)** | varies | `tokyo/widgets/{widget}/pages/spokes/*.md` |
| **Comparisons** | varies | `tokyo/widgets/{widget}/pages/comparisons/*.md` |

**Result: ~400,000 pages generated by crawling markdown folders.**

### Standard pages per widget (current routes)

Every widget has these standard pages:

| Page | URL | Content |
|------|-----|---------|
| **Overview** | `/widgets/faq` | Hero, value props, Minibob |
| **Templates** | `/widgets/faq/templates` | Live template previews |
| **Examples** | `/widgets/faq/examples` | Real widget instances in context |
| **Features** | `/widgets/faq/features` | Feature grid, comparisons |
| **Pricing** | `/widgets/faq/pricing` | Widget-specific pricing context |

Current implementation note:

- Only the **Overview** page renders the full landing blocks.
- The other pages currently render a minimal placeholder (e.g. “FAQ — Templates”) until their blocks are implemented.

| Page type | URL pattern | Example |
|-----------|-------------|---------|
| Hub (category) | `/widgets/faq/for-{category}` | `/widgets/faq/for-ecommerce` |
| Spoke (platform) | `/widgets/faq/for-{platform}` | `/widgets/faq/for-shopify` |
| Spoke (niche) | `/widgets/faq/for-{niche}` | `/widgets/faq/for-dentists` |
| Comparison | `/compare/faq-vs-{competitor}` | `/compare/faq-vs-elfsight` |

### Page count calculation (per widget, per locale)

| Page type | Count per widget | Example |
|-----------|------------------|---------|
| Standard pages | 5 | Overview, Templates, Examples, Features, Pricing |
| Hubs (categories) | ~5 | `/widgets/faq/for-ecommerce` |
| Spokes (platforms/niches) | ~30 | `/widgets/faq/for-shopify` |
| Comparisons | ~5 | `/compare/faq-vs-elfsight` |
| **Per widget × locale** | **~45 pages** | |
| **100 widgets × 50 locales** | **~225,000 pages** | |
| **+ Widget gallery per locale** | **+50 pages** | |
| **+ Home, Pricing, Blog, Docs** | **+500 pages** | |
| **Total** | **~400,000 pages** | |

---

## 2) URL taxonomy

### Structure

```
https://clickeen.com/{locale}/{section}/{widget}/{useCase}
```

### Rules

| Rule | Implementation |
|------|----------------|
| **Locale prefix always** | `/en/`, `/de/`, `/es/` — never optional |
| **No trailing slashes** | `/widgets/faq` not `/widgets/faq/` |
| **Lowercase, kebab-case** | `/for-shopify` not `/for-Shopify` |
| **`for-` prefix on use cases** | `/for-dentists`, `/for-shopify` |
| **Flat use case URLs** | `/for-shopify` not `/for-ecommerce/shopify` |

### URL patterns

| Page type | URL pattern | Example |
|-----------|-------------|---------|
| **Home** | `/{locale}/` | `/en/` |
| **Widget gallery** | `/{locale}/widgets/` | `/en/widgets/` |
| **Widget landing** | `/{locale}/widgets/{widget}` | `/en/widgets/faq` |
| **Template gallery** | `/{locale}/widgets/{widget}/templates` | `/en/widgets/faq/templates` |
| **Hub (category)** | `/{locale}/widgets/{widget}/for-{category}` | `/en/widgets/faq/for-ecommerce` |
| **Spoke (platform)** | `/{locale}/widgets/{widget}/for-{platform}` | `/en/widgets/faq/for-shopify` |
| **Spoke (niche)** | `/{locale}/widgets/{widget}/for-{niche}` | `/en/widgets/faq/for-dentists` |
| **Comparison** | `/{locale}/compare/{widget}-vs-{competitor}` | `/en/compare/faq-vs-elfsight` |
| **Pricing** | `/{locale}/pricing` | `/en/pricing` |
| **Blog** | `/{locale}/blog/{slug}` | `/en/blog/how-to-add-faq` |
| **Docs** | `/{locale}/docs/{path}` | `/en/docs/getting-started` |

### Locale codes

ISO 639-1 (2-letter codes):

| Language | Code |
|----------|------|
| English | `en` |
| German | `de` |
| Spanish | `es` |
| French | `fr` |
| Portuguese | `pt` |
| Japanese | `ja` |
| Korean | `ko` |
| Arabic | `ar` |
| Chinese | `zh` |
| Italian | `it` |

---

## 3) Use case taxonomy (hub-and-spoke model)

### Type hierarchy

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  HUB (category)                                                             │
│  /for-ecommerce, /for-saas, /for-agencies                                   │
│  High-level value prop + platform cards linking to spokes                   │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │ children
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  SPOKE (platform)                                                           │
│  /for-shopify, /for-hubspot, /for-bigcommerce                               │
│  Platform-specific content + link to parent hub + sibling platforms         │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  SPOKE (niche) — standalone, no parent hub                                  │
│  /for-dentists, /for-lawyers, /for-restaurants                              │
│  Niche-specific content, no parent link                                     │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Complete use case map

```
HUBS (categories)
├── for-ecommerce
│   └── for-shopify, for-bigcommerce, for-woocommerce, 
│       for-magento, for-squarespace, for-wix
│
├── for-saas
│   └── for-hubspot, for-salesforce, for-intercom,
│       for-zendesk, for-notion, for-slack
│
├── for-agencies
│   └── for-marketing-agencies, for-web-agencies,
│       for-design-agencies, for-seo-agencies
│
├── for-small-business
│   └── for-local-business, for-service-business,
│       for-consultants, for-freelancers
│
└── for-enterprise
    └── for-fortune-500, for-government, for-healthcare-enterprise

STANDALONE SPOKES (niches)
├── for-dentists
├── for-lawyers
├── for-restaurants
├── for-real-estate
├── for-healthcare
├── for-education
├── for-nonprofits
├── for-fitness
├── for-beauty-salons
└── for-hotels
```

---

## 4) Page templates (current execution)

### Widget landing page (`/[locale]/widgets/[widget]`)

Data source:

- `tokyo/widgets/{widget}/pages/landing.md`
- Required sections: `## Headline`, `## Subheadline`, `## Stats`, `## Steps`, `## Features`, `## Meta FAQ`, `## CTA` (2 lines), `## Minibob` (2 lines)

Implementation:

- Page template: `prague/src/pages/[locale]/widgets/[widget]/index.astro`
- Blocks: `prague/src/blocks/widget-landing/*` + `prague/src/blocks/site/minibob.astro`

### Hub page anatomy (category)

**URL:** `/{locale}/widgets/{widget}/for-{category}`

```
┌─────────────────────────────────────────────────────────────┐
│ BREADCRUMB                                                  │
│ Widgets > {widget} > {category}                            │
├─────────────────────────────────────────────────────────────┤
│ HERO                                                        │
│ H1: {gtm.useCases[hub].headline}                           │
│ Subhead: {gtm.useCases[hub].description}                   │
│ [Create Free]                                               │
├─────────────────────────────────────────────────────────────┤
│ PAIN POINTS (from gtm.useCases[hub].painPoints)             │
│ • Pain point 1                                              │
│ • Pain point 2                                              │
│ • Pain point 3                                              │
├─────────────────────────────────────────────────────────────┤
│ PLATFORM CARDS (links to all child spokes)                  │
│ "Choose your platform:"                                     │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐            │
│ │ Shopify │ │BigComm. │ │WooComm. │ │ Magento │            │
│ │   logo  │ │   logo  │ │   logo  │ │   logo  │            │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘            │
├─────────────────────────────────────────────────────────────┤
│ MINIBOB (with category starter questions)                   │
│ SDR Copilot pre-loaded with e-commerce context             │
├─────────────────────────────────────────────────────────────┤
│ CTA BLOCK                                                   │
│ "Create Your {widget} for {category} — Free"               │
└─────────────────────────────────────────────────────────────┘
```

**Internal links:** All child spokes (`gtm.useCases[hub].children`)

### Spoke page anatomy (platform/niche)

**URL:** `/{locale}/widgets/{widget}/for-{platform}`

```
┌─────────────────────────────────────────────────────────────┐
│ BREADCRUMB                                                  │
│ Widgets > {widget} > {hub} > {spoke}                       │
│ (or Widgets > {widget} > {spoke} if standalone niche)      │
├─────────────────────────────────────────────────────────────┤
│ HERO                                                        │
│ ┌──────────────────────────────────┬──────────────────────┐ │
│ │ H1: {gtm.useCases[spoke].headline}│ [Platform Logo]     │ │
│ │ Subhead: platform-specific pitch  │ (e.g., Shopify)     │ │
│ │ [Install on {platform}]           │                     │ │
│ └──────────────────────────────────┴──────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ INSTALL STEPS (platform-specific)                           │
│ Step 1: Copy embed code                                     │
│ Step 2: Paste in {platform} editor                         │
│ Step 3: Done (60 seconds)                                   │
├─────────────────────────────────────────────────────────────┤
│ PAIN POINTS (from gtm.useCases[spoke].painPoints)           │
│ • Platform-specific pain 1                                  │
│ • Platform-specific pain 2                                  │
├─────────────────────────────────────────────────────────────┤
│ EXAMPLES (screenshots of widget on this platform)           │
│ [Screenshot 1] [Screenshot 2] [Screenshot 3]               │
├─────────────────────────────────────────────────────────────┤
│ MINIBOB (with platform-tailored starter questions)          │
│ SDR Copilot pre-loaded with {platform} context             │
├─────────────────────────────────────────────────────────────┤
│ RELATED PLATFORMS (siblings under same hub)                 │
│ "Also works with: BigCommerce, WooCommerce, Magento"       │
├─────────────────────────────────────────────────────────────┤
│ BACK LINK                                                   │
│ ← Back to E-commerce                                        │
└─────────────────────────────────────────────────────────────┘
```

**Internal links:**
- Parent hub (breadcrumb + back link)
- Sibling spokes (related platforms section)
- Widget landing (breadcrumb)

### Comparison page anatomy

**URL:** `/{locale}/compare/{widget}-vs-{competitor}`

```
┌─────────────────────────────────────────────────────────────┐
│ HERO                                                        │
│ H1: "Clickeen {widget} vs {competitor.name}"               │
│ Subhead: "See why teams choose Clickeen"                   │
├─────────────────────────────────────────────────────────────┤
│ COMPARISON TABLE                                            │
│ ┌──────────────────┬────────────┬────────────┐             │
│ │ Feature          │ Clickeen   │ {competitor}│             │
│ ├──────────────────┼────────────┼────────────┤             │
│ │ AI customization │ ✓          │ ✗          │             │
│ │ SEO Schema.org   │ ✓          │ ✓          │             │
│ │ Free tier        │ ✓          │ Limited    │             │
│ │ GEO optimization │ ✓          │ ✗          │             │
│ └──────────────────┴────────────┴────────────┘             │
├─────────────────────────────────────────────────────────────┤
│ OUR ADVANTAGES (from gtm.competitors[].ourAdvantages)       │
│ • AI-powered content generation                             │
│ • Better SEO with Schema.org                                │
│ • Faster setup (60 seconds)                                │
├─────────────────────────────────────────────────────────────┤
│ MINIBOB (try it yourself)                                   │
│ "See the difference — create your {widget} now"            │
├─────────────────────────────────────────────────────────────┤
│ CTA BLOCK                                                   │
│ "Switch from {competitor} to Clickeen — Free"              │
└─────────────────────────────────────────────────────────────┘
```

**SEO target:** "{widget} vs {competitor}", "alternative to {competitor}"

### Widget gallery page anatomy

**URL:** `/{locale}/widgets/`

```
┌─────────────────────────────────────────────────────────────┐
│ HERO                                                        │
│ H1: "Free Widget Templates for Your Website"               │
│ Subhead: "100+ widgets. Customize with AI. Embed anywhere."│
│ [Browse All] [Popular] [New]                               │
├─────────────────────────────────────────────────────────────┤
│ CATEGORY FILTER                                             │
│ [All] [Engagement] [Social Proof] [Forms] [Navigation] ... │
├─────────────────────────────────────────────────────────────┤
│ WIDGET CARDS GRID                                           │
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐            │
│ │ [Preview]   │ │ [Preview]   │ │ [Preview]   │            │
│ │ FAQ Widget  │ │ Testimonials│ │ Logo Slider │            │
│ │ [Trending]  │ │ [Popular]   │ │ [New]       │            │
│ │ 12 templates│ │ 8 templates │ │ 6 templates │            │
│ └─────────────┘ └─────────────┘ └─────────────┘            │
├─────────────────────────────────────────────────────────────┤
│ STATS STRIP                                                 │
│ "100+ widgets" "50,000+ sites" "50 countries"              │
├─────────────────────────────────────────────────────────────┤
│ PLATFORM STRIP                                              │
│ "Works on: Shopify, WordPress, Wix, + 95 more"             │
└─────────────────────────────────────────────────────────────┘
```

**Data source:** Aggregated from all `tokyo/widgets/*/gtm.json`

### Template gallery page anatomy

**URL:** `/{locale}/widgets/{widget}/templates`

```
┌─────────────────────────────────────────────────────────────┐
│ BREADCRUMB                                                  │
│ Widgets > {widget} > Templates                             │
├─────────────────────────────────────────────────────────────┤
│ HERO                                                        │
│ H1: "{widget} Templates"                                   │
│ Subhead: "12 ready-to-use templates. Pick one and customize."│
├─────────────────────────────────────────────────────────────┤
│ TEMPLATE CARDS GRID (large previews)                        │
│ ┌─────────────────┐ ┌─────────────────┐                    │
│ │ [Live Preview]  │ │ [Live Preview]  │                    │
│ │ Accordion       │ │ Grid            │                    │
│ │ "Classic FAQ"   │ │ "Modern cards"  │                    │
│ │ [Use Template]  │ │ [Use Template]  │                    │
│ └─────────────────┘ └─────────────────┘                    │
├─────────────────────────────────────────────────────────────┤
│ CTA BLOCK                                                   │
│ "Start from scratch with AI instead"                       │
│ [Create Custom {widget}]                                   │
└─────────────────────────────────────────────────────────────┘
```

**SEO target:** "{widget} templates", "free {widget} template"

---

## 5) Data source: Markdown files (current)

Prague reads `tokyo/widgets/{widget}/pages/` from the repo at build time and renders whatever files exist.

### Widget folder structure

```
tokyo/widgets/faq/
  spec.json               # Widget state schema (for Bob)
  product.md              # PM brief: what, why, features, differentiators
  agents/sdr-copilot.md   # SDR Copilot contract (free users, Minibob)
  cs-copilot.md           # CS Copilot contract (paid users, Bob)
  seo.md                  # Keywords, schema patterns, meta templates
  
  pages/                  # ← Prague crawls this
    
    # Standard pages (same for all widgets)
    landing.md            # → /widgets/faq (Overview)
    templates.md          # → /widgets/faq/templates
    examples.md           # → /widgets/faq/examples
    features.md           # → /widgets/faq/features
    pricing.md            # → /widgets/faq/pricing
    
    # Widget instances (real widgets embedded in pages)
    instances/
      hero-preview.json           # Live widget on landing page
      templates/
        accordion.json            # Template preview
        grid.json
        minimal.json
      examples/
        shopify-store.json        # Example: e-commerce FAQ
        saas-product.json         # Example: SaaS FAQ
        dentist-website.json      # Example: local business FAQ
    
    # Assets (images, screenshots)
    assets/
      hero.png
      templates/
        accordion.png
        grid.png
      examples/
        shopify-store.png
        saas-product.png
    
    # Use-case pages (varies per widget)
    hubs/
      for-ecommerce.md    # → /widgets/faq/for-ecommerce
      for-saas.md         # → /widgets/faq/for-saas
    
    spokes/
      for-shopify.md      # → /widgets/faq/for-shopify
      for-wordpress.md    # → /widgets/faq/for-wordpress
      for-dentists.md     # → /widgets/faq/for-dentists
    
    comparisons/
      vs-elfsight.md      # → /compare/faq-vs-elfsight
      vs-commoninja.md    # → /compare/faq-vs-commoninja
```

**File exists = page gets built. No manifest.**

### Widget instances (the 10X localization advantage)

Widget instances are real widget state (JSON) embedded in Prague pages.

#### Why instances, not screenshots

| Approach | Pros | Cons |
|----------|------|------|
| Screenshots | Fast, simple | Static, not interactive, can't localize |
| Live instances | Interactive, localizable, "try before buy" | Slightly more complex |

**We use live instances because they localize automatically.**

#### Instance structure

```json
{
  "widget": "faq",
  "id": "prague-faq-shopify-example",
  "state": {
    "items": [
      { "question": "What is your return policy?", "answer": "..." },
      { "question": "Do you ship internationally?", "answer": "..." }
    ],
    "appearance": { "accentColor": "#4F46E5" },
    "layout": { "type": "accordion" }
  }
}
```

#### Localization flow

```
1. English instance: instances/examples/shopify-store.json
   { "question": "What is your return policy?", ... }

2. prague-localize reads instance JSON

3. Translates content via LLM:
   { "question": "返品ポリシーは何ですか？", ... }

4. Caches translated instance in D1:
   Key: "faq:instances:shopify-store:ja"

5. Japanese page embeds localized instance:
   /ja/widgets/faq/examples → Japanese widget content
```

#### Embedding instances in markdown

```markdown
## Examples

### Shopify Store FAQ

A real FAQ widget for an e-commerce store.

{{instance:examples/shopify-store.json}}

### SaaS Product FAQ

A FAQ widget for a software product.

{{instance:examples/saas-product.json}}
```

Builder replaces `{{instance:...}}` with embedded widget.

#### Result

| Page | English | Japanese | German |
|------|---------|----------|--------|
| `/widgets/faq/examples` | English FAQ content | Japanese FAQ content | German FAQ content |
| `/widgets/faq/templates` | English template demos | Japanese template demos | German template demos |

**Competitors show English widgets everywhere. We show localized widgets everywhere.**

### Markdown schema (consistent TOC per page type)

#### `landing.md`

```markdown
# FAQ Widget

## Headline
Free FAQ Widget for Your Website

## Subheadline
Answer questions before they're asked. Reduce support tickets. Boost SEO.

## Value props
- **Reduce support tickets**: Answer common questions before they reach your inbox
- **Boost SEO**: Schema.org markup gets your FAQs in Google rich results
- **60-second setup**: Pick a template, customize with AI, embed anywhere

## Features
- SEO-optimized
- Schema.org markup
- AI-powered customization
- Mobile-first design

## Stats
- 10,000+ FAQs created
- 1M+ monthly views
- 500+ active sites

## Templates
![Accordion](./assets/templates/accordion.png)
![Grid](./assets/templates/grid.png)
![Minimal](./assets/templates/minimal.png)

## Meta FAQ
### Is the FAQ widget really free?
Yes, forever free with a Clickeen backlink. Remove it with Pro.

### Does it work on mobile?
Yes, all our widgets are mobile-first and responsive.

## CTA
Create Your FAQ Widget — Free
```

#### `spokes/for-shopify.md`

```markdown
# FAQ for Shopify

## Headline
Add a beautiful FAQ to your Shopify store in 60 seconds

## Pain points
- Shopify's built-in FAQ is too basic
- Third-party apps are slow and bloated
- Need SEO-optimized FAQ for product pages

## Install steps
1. Copy embed code from Clickeen
2. Go to Shopify Admin → Online Store → Themes → Customize
3. Add Custom HTML block and paste code

## Examples
![Example 1](./assets/for-shopify/example-1.png)
![Example 2](./assets/for-shopify/example-2.png)

## Starter questions
- Do you ship internationally?
- What is your return policy?
- How do I track my order?

## CTA
Create Your Shopify FAQ — Free
```

#### `comparisons/vs-elfsight.md`

```markdown
# Clickeen FAQ vs Elfsight

## Headline
Why teams switch from Elfsight to Clickeen

## Comparison table
| Feature | Clickeen | Elfsight |
|---------|----------|----------|
| AI customization | ✓ | ✗ |
| Schema.org | ✓ | ✓ |
| Free tier | Unlimited | Limited |
| GEO optimization | ✓ | ✗ |

## Our advantages
- AI-powered content generation
- Better SEO with Schema.org
- Faster 60-second setup

## CTA
Switch to Clickeen — Free
```

#### `templates.md`

```markdown
# FAQ Templates

## Headline
12 ready-to-use FAQ templates

## Subheadline
Pick a template, customize with AI, embed in 60 seconds.

## Templates
{{instance:templates/accordion.json}}
{{instance:templates/grid.json}}
{{instance:templates/minimal.json}}
{{instance:templates/colorful.json}}

## CTA
Start from scratch with AI instead
```

#### `examples.md`

```markdown
# FAQ Examples

## Headline
See the FAQ widget in action

## Subheadline
Real examples from real websites. Click to interact.

## Examples

### E-commerce Store
A FAQ widget helping reduce cart abandonment.
{{instance:examples/shopify-store.json}}

### SaaS Product
A FAQ widget for a software product page.
{{instance:examples/saas-product.json}}

### Local Business
A FAQ widget for a dentist website.
{{instance:examples/dentist-website.json}}

## CTA
Create your own FAQ — Free
```

#### `features.md`

```markdown
# FAQ Features

## Headline
Everything you need in a FAQ widget

## Features

### SEO-optimized
Schema.org FAQPage markup gets your answers in Google rich results.

### AI-powered
SDR Copilot writes FAQ content based on your website.

### Mobile-first
Responsive design that works on any device.

### Customizable
Match your brand with colors, fonts, and layouts.

### Fast
Lightweight embed that won't slow down your site.

### Analytics
Track which questions get clicked most.

## Comparison
| Feature | Clickeen | Elfsight | Common Ninja |
|---------|----------|----------|--------------|
| AI content generation | ✓ | ✗ | ✗ |
| Schema.org | ✓ | ✓ | ✓ |
| Free tier | Unlimited | Limited | Limited |
| GEO optimization | ✓ | ✗ | ✗ |

## CTA
Try all features — Free
```

#### `pricing.md`

```markdown
# FAQ Pricing

## Headline
Simple, transparent pricing

## Subheadline
Start free. Upgrade when you're ready.

## Plans

### Free
- Unlimited FAQs
- All templates
- Basic customization
- Clickeen branding
- $0/month

### Pro
- Everything in Free
- Remove branding
- Priority support
- Advanced analytics
- $9/month

### Business
- Everything in Pro
- Custom domain
- Team collaboration
- API access
- $29/month

## FAQ
### Can I switch plans anytime?
Yes, upgrade or downgrade anytime.

### Is there a free trial?
The Free plan is free forever. No credit card required.

## CTA
Start Free — No credit card required
```

**All markdown files follow consistent TOC for their page type. GTM Agent creates/updates these files.**

### Image resolution rules

| Image type | Source | Path convention |
|------------|--------|-----------------|
| **Widget hero/preview** | Per-widget | `pages/assets/hero.png` |
| **Template screenshots** | Per-widget | `pages/assets/templates/*.png` |
| **Platform logos** | Shared | `tokyo/assets/platforms/{platform}.svg` |
| **Spoke examples** | Per-spoke | `pages/spokes/assets/{spoke}/*.png` |
| **Block icons** | Shared | `tokyo/assets/icons/*.svg` |

---

## 6) Block schema (page type → blocks)

Each page type is composed of specific blocks. Builder parses markdown sections and renders blocks.

### Landing page (`landing.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `widget-landing/hero` | `## Headline`, `## Subheadline` | `assets/hero.png` |
| `PlatformStrip` | — | `tokyo/assets/platforms/*.svg` |
| `widget-landing/steps` | — | (hardcoded 3 icons) |
| `UseCaseGrid` | — | (crawls `hubs/*.md` + `spokes/*.md`) |
| `TemplateGallery` | `## Templates` | `assets/templates/*.png` |
| `widget-landing/features` | `## Features` | — |
| `widget-landing/stats` | `## Stats` | — |
| `widget-landing/meta-faq` | `## Meta FAQ` | — |
| `ComparisonStrip` | — | (crawls `comparisons/*.md`) |
| `widget-landing/cta` | `## CTA` | — |
| `Minibob` | — | (embed) |

### Hub page (`hubs/*.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `Breadcrumb` | — | — |
| `HeroHub` | `## Headline`, `## Description` | — |
| `PainPoints` | `## Pain points` | — |
| `PlatformCards` | `## Platforms` | `tokyo/assets/platforms/*.svg` |
| `Minibob` | `## Starter questions` | — |
| `widget-landing/cta` | `## CTA` | — |

### Spoke page (`spokes/*.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `Breadcrumb` | — | — |
| `HeroSpoke` | `## Headline` | `tokyo/assets/platforms/{platform}.svg` |
| `InstallSteps` | `## Install steps` | — |
| `PainPoints` | `## Pain points` | — |
| `Examples` | `## Examples` | `assets/{spoke}/*.png` |
| `Minibob` | `## Starter questions` | — |
| `RelatedLinks` | — | (crawls sibling spokes) |
| `widget-landing/cta` | `## CTA` | — |

### Comparison page (`comparisons/*.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `Breadcrumb` | — | — |
| `HeroComparison` | `## Headline` | — |
| `ComparisonTable` | `## Comparison table` | — |
| `Advantages` | `## Our advantages` | — |
| `Minibob` | — | — |
| `widget-landing/cta` | `## CTA` | — |

### Templates page (`templates.md`)

| Block | Content from markdown | Instances |
|-------|----------------------|-----------|
| `Breadcrumb` | — | — |
| `HeroTemplates` | `## Headline`, `## Subheadline` | — |
| `TemplateGrid` | `## Templates` | `{{instance:templates/*.json}}` |
| `widget-landing/cta` | `## CTA` | — |

### Examples page (`examples.md`)

| Block | Content from markdown | Instances |
|-------|----------------------|-----------|
| `Breadcrumb` | — | — |
| `HeroExamples` | `## Headline`, `## Subheadline` | — |
| `ExampleGrid` | `## Examples` | `{{instance:examples/*.json}}` (localized) |
| `widget-landing/cta` | `## CTA` | — |

### Features page (`features.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `Breadcrumb` | — | — |
| `HeroFeatures` | `## Headline` | — |
| `FeatureCards` | `## Features` (nested `###`) | — |
| `ComparisonTable` | `## Comparison` | — |
| `widget-landing/cta` | `## CTA` | — |

### Pricing page (`pricing.md`)

| Block | Content from markdown | Images |
|-------|----------------------|--------|
| `Breadcrumb` | — | — |
| `HeroPricing` | `## Headline`, `## Subheadline` | — |
| `PricingCards` | `## Plans` (nested `###`) | — |
| `widget-landing/meta-faq` | `## FAQ` | — |
| `widget-landing/cta` | `## CTA` | — |

### Builder logic

```javascript
// scripts/prague-build.mjs

for (const file of crawl('tokyo/widgets/*/pages/**/*.md')) {
  
  // 1. Parse markdown → sections
  const md = parseMarkdown(file)
  
  // 2. Determine page type
  const pageType = getPageType(file.path) 
  // landing | templates | examples | features | pricing | hub | spoke | comparison
  
  // 3. Get blocks for this page type
  const blocks = BLOCK_REGISTRY[pageType]
  
  // 4. Resolve images (relative → absolute, shared → tokyo/assets)
  const images = resolveImages(file.path, md)
  
  // 5. Resolve widget instances (for templates/examples pages)
  const instances = resolveInstances(file.path, md)
  // Reads {{instance:...}} references → loads JSON
  
  // 6. Render blocks
  const html = blocks.map(block => 
    block.render(md.sections, images, instances, { widget, locale: 'en' })
  ).join('')
  
  // 7. Output
  write(`dist/en/${toUrl(file.path)}/index.html`, html)
}
```

### Instance localization logic

```javascript
// scripts/prague-localize.js

for (const page of crawl('dist/en/**/*.html')) {
  for (const locale of LOCALES) {
    
    // 1. Extract translatable content
    const strings = extractStrings(page)
    const instances = extractInstances(page)
    
    // 2. Translate strings (cache in D1)
    const translatedStrings = await translateStrings(strings, locale)
    
    // 3. Translate instance content (cache in D1)
    const translatedInstances = await translateInstances(instances, locale)
    // Key: "faq:instances:shopify-store:de"
    
    // 4. Render localized page
    const html = renderPage(page, translatedStrings, translatedInstances)
    
    // 5. Output
    write(`dist/${locale}/${page.path}`, html)
  }
}
```

---

## 7) Minibob integration

Every page embeds Minibob with SDR Copilot.

### Embed pattern

```astro
<Minibob
  widget={widget}
  starterQuestions={useCase.starterQuestions}
  locale={locale}
  client:load
/>
```

### Minibob behavior

- Loads unpublished instance with starter questions from markdown `## Starter questions`
- SDR Copilot active with content-first greeting
- 50K token budget per session
- Conversion gate when budget exhausted
- "Publish" triggers signup flow

### Shadow DOM embed (SEO/GEO mode)

Per `documentation/capabilities/seo-geo.md`:
- Widget UI renders into Shadow DOM (CSS isolation)
- Schema JSON-LD injected into `<head>`
- Deep links work via hash fragments

---

## 7) SEO implementation

### hreflang (every page)

```html
<link rel="alternate" hreflang="en" href="https://clickeen.com/en/widgets/faq/for-shopify" />
<link rel="alternate" hreflang="de" href="https://clickeen.com/de/widgets/faq/for-shopify" />
<link rel="alternate" hreflang="es" href="https://clickeen.com/es/widgets/faq/for-shopify" />
<link rel="alternate" hreflang="x-default" href="https://clickeen.com/en/widgets/faq/for-shopify" />
```

### Canonical (every page)

```html
<!-- On /de/widgets/faq/for-shopify -->
<link rel="canonical" href="https://clickeen.com/de/widgets/faq/for-shopify" />
```

### Schema JSON-LD

```html
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "SoftwareApplication",
      "name": "Clickeen FAQ Widget",
      "applicationCategory": "WebApplication",
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
    },
    {
      "@type": "FAQPage",
      "mainEntity": [...]
    }
  ]
}
</script>
```

### Sitemap

```xml
<!-- sitemap-index.xml -->
<sitemapindex>
  <sitemap><loc>https://clickeen.com/sitemap-en.xml</loc></sitemap>
  <sitemap><loc>https://clickeen.com/sitemap-de.xml</loc></sitemap>
  ...
</sitemapindex>
```

Each locale sitemap includes hreflang annotations.

### Redirects

| From | To | Type |
|------|-----|------|
| `/` | `/{detected-locale}/` | 302 |
| `/widgets/faq` | `/en/widgets/faq` | 301 |
| `/{locale}/widgets/faq/` | `/{locale}/widgets/faq` | 301 |

---

## 8) Internal linking structure

```
                    /{locale}/widgets/
                         (gallery)
                              │
                              ▼
                    /{locale}/widgets/{widget}
                         (landing)
                              │
              ┌───────┬───────┼───────┬───────────┐
              ▼       ▼       ▼       ▼           ▼
         /templates  /for-ecommerce  /for-saas  /for-dentists  /vs-elfsight
              │           │               │      (standalone)    (compare)
              │     ┌─────┼─────┐         │
              │     ▼     ▼     ▼         ▼
              │  /shopify /bc /woo    /hubspot
              │
              └──────────────────────────────────────────────────────────────
```

### Link rules

| From | To | Link type |
|------|-----|-----------|
| Widget gallery | All widget landings | Widget cards |
| Widget landing | All hubs | Use case cards |
| Widget landing | Templates | "See Templates" CTA |
| Widget landing | Comparisons | Comparison strip |
| Hub | All child spokes | Platform cards |
| Spoke | Parent hub | Breadcrumb + back link |
| Spoke | Sibling spokes | "Also works with" section |
| All pages | Widget landing | Breadcrumb |
| All pages | Widget gallery | Breadcrumb |
| Comparison | Widget landing | CTA + Minibob |
| Templates | Widget landing | Breadcrumb |

---

## 9) i18n implementation

### Locale detection

1. URL path is canonical (`/de/widgets/faq`)
2. Root `/` redirects based on `Accept-Language` header
3. User can switch locale via language selector
4. Preference stored in cookie for subsequent visits

### Content localization

| Content type | Source |
|--------------|--------|
| UI strings | `tokyo/i18n/{locale}/coreui.json` |
| Widget marketing copy | Translated by `prague-localize` script, cached in D1 |
| Starter questions | Translated by `prague-localize` script, cached in D1 |

**English markdown is source of truth. Translations are generated and cached.**

### RTL support

For `ar`, `he`:
- `dir="rtl"` on `<html>`
- CSS uses logical properties (`margin-inline-start` not `margin-left`)
- Font stack includes RTL-friendly fonts

---

## 10) Build + deploy (current)

Framework: **Astro**

- Output: **static**
- Islands: only `Minibob` ships client JS

In this repo, Prague is built/deployed via the monorepo scripts (Turbo + pnpm). See `prague/README.md` for the env vars and commands.

### Pipeline steps

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  1. CRAWL MARKDOWN (prague-build)                                           │
│                                                                             │
│  tokyo/widgets/*/pages/**/*.md   → discover pages                           │
│  tokyo/assets/platforms/*.svg    → shared platform logos                    │
│  File exists = page exists. No manifest.                                    │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  2. PARSE + RENDER (prague-build)                                           │
│                                                                             │
│  For each .md file:                                                         │
│    - Parse markdown → sections                                              │
│    - Determine page type (landing | hub | spoke | comparison)               │
│    - Get blocks for page type                                               │
│    - Resolve images (relative → absolute)                                   │
│    - Render blocks → HTML                                                   │
│    - Output: dist/en/{widget}/{path}/index.html                             │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  3. LOCALIZE (prague-localize)                                              │
│                                                                             │
│  For each English HTML page:                                                │
│    - Extract translatable strings                                           │
│    - Check D1 cache for existing translation                                │
│    - Cache miss → LLM translate → cache in D1                               │
│    - Output: dist/{locale}/{path}/index.html                                │
│                                                                             │
│  50 locales × all pages = ~400,000 pages                                    │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  4. SITEMAP (prague-sitemap)                                                │
│                                                                             │
│  - Crawl dist/**/*.html                                                     │
│  - Generate sitemap-index.xml                                               │
│  - Generate sitemap-{locale}.xml for each locale                            │
│  - Add hreflang annotations                                                 │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  5. OUTPUT                                                                  │
│                                                                             │
│  dist/                                                                      │
│    en/widgets/index.html                          (widget gallery)          │
│    en/widgets/faq/index.html                      (widget landing)          │
│    en/widgets/faq/templates/index.html            (template gallery)        │
│    en/widgets/faq/for-ecommerce/index.html        (hub)                     │
│    en/widgets/faq/for-shopify/index.html          (spoke)                   │
│    en/widgets/faq/for-dentists/index.html         (niche spoke)             │
│    de/widgets/faq/index.html                      (localized)               │
│    de/widgets/faq/for-shopify/index.html          (localized)               │
│    en/compare/faq-vs-elfsight/index.html          (comparison)              │
│    ...                                                                      │
│    sitemap-index.xml                                                        │
│    sitemap-en.xml                                                           │
│    sitemap-de.xml                                                           │
│    ...                                                                      │
└────────────────────────────────┬────────────────────────────────────────────┘
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│  6. DEPLOY (prague-deploy)                                                  │
│                                                                             │
│  Cloudflare Pages                                                           │
│  - Edge cached globally                                                     │
│  - Immutable until next build                                               │
│  - Build triggered on git push or markdown change                           │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Translation caching (D1)

```sql
-- D1 table: translations
CREATE TABLE translations (
  key TEXT PRIMARY KEY,     -- "faq:for-shopify:headline:de"
  locale TEXT NOT NULL,
  value TEXT NOT NULL,
  updated_at INTEGER
);
```

**Cache hit → use cached. Cache miss → LLM translate → cache.**

### Build triggers

| Trigger | Action |
|---------|--------|
| Git push to `main` | Full rebuild |
| Markdown file added/changed | Rebuild affected pages |
| i18n catalog updated | Rebuild UI string pages |
| Scheduled (weekly) | Full rebuild + refresh translation cache |

---

## 11) File structure (current)

```
prague/
  astro.config.mjs           # Astro + Cloudflare Pages adapter
  package.json
  
  src/
    layouts/
      Base.astro             # HTML shell, head, nav, footer
      WidgetPage.astro       # Shared layout for widget pages
    
    pages/
      index.astro            # Root redirect
      [locale]/
        index.astro          # Home page
        widgets/
          index.astro        # Widget gallery
          [widget]/
            index.astro      # Widget landing
            [useCase]/
              index.astro    # Hub or spoke page
        compare/
          [comparison]/
            index.astro      # Comparison page
        pricing.astro
        blog/
          index.astro
          [slug].astro
    
    blocks/                    # Prague "sections" (not Dieter components)
      site/
        nav/
          Nav.astro            # System-owned nav + widget sub-nav + mega menu
          widgetsMegaMenu.ts   # Mega menu content resolver
        footer.astro           # Site footer
      widget-landing/
        hero.astro             # Widget landing hero + preview slot
        stats.astro            # "10,000+ created" numbers
        steps.astro            # 3-step embed process
        features.astro         # Feature cards/grid
        meta-faq.astro         # Meta FAQ about the widget (SSR <details>)
        cta.astro              # Final conversion CTA
      playground/
        carousel.astro         # "We won't die" overflow test
    
    lib/
      markdown.ts            # Parse markdown → sections
      blocks.ts              # Block registry (page type → blocks)
      images.ts              # Resolve image paths
      i18n.ts                # Load i18n catalogs
      seo.ts                 # Generate hreflang, canonical, schema
  
  public/
    robots.txt
    favicon.ico
    # Static assets
```

### Layout system (core)

Prague uses a **flex-first** layout utility layer with a single breakpoint (desktop/mobile).
See: `documentation/services/prague/layout.md`.

### Block catalog (core)

Prague pages are composed from reusable blocks with strict prop contracts.
See: `documentation/services/prague/blocks.md`.

### Block design rules

| Rule | Rationale |
|------|-----------|
| **Call them "blocks", not "components"** | Avoid confusion with Dieter components (Bob ToolDrawer) |
| **Import only Dieter foundation tokens** | `@import 'dieter/tokens/colors.css'`, etc. — no Dieter components |
| **Astro-only (no React/Vue)** | SSG, no client-side hydration except Minibob island |
| **Scoped styles** | Each block has `<style>` scoped to that block |
| **Props from GTM JSON** | Blocks receive data, don't fetch it |
| **No hardcoded content** | Everything comes from GTM JSON or i18n catalogs |

---

## 12) Performance requirements

| Metric | Target |
|--------|--------|
| **LCP** | ≤ 2.5s |
| **CLS** | < 0.1 |
| **FID** | < 100ms |
| **Total JS** | < 100KB (only Minibob) |
| **Time to Interactive** | < 3s |

### How we achieve this

- SSG: HTML is pre-rendered, no server rendering
- Islands: Only Minibob ships JS
- Edge caching: Cloudflare Pages serves from nearest PoP
- Minimal CSS: Scoped styles, no framework bloat
- Optimized images: WebP, lazy loading, responsive sizes

---

## 13) Integrations

| System | Integration |
|--------|-------------|
| **Tokyo** | Source: `tokyo/widgets/*/pages/*.md`, i18n catalogs, shared assets |
| **D1** | Translation cache for localized content |
| **Bob** | Minibob iframe/embed for each page |
| **Venice** | Widget embed origin for Minibob |
| **GTM Agent** | Creates/updates markdown files |
| **Berlin** | Analytics (page views, conversions) |
| **San Francisco** | SDR Copilot in Minibob |

### Environment variables

```
PUBLIC_TOKYO_URL=https://tokyo.clickeen.com
PUBLIC_BOB_URL=https://app.clickeen.com
PUBLIC_VENICE_URL=https://embed.clickeen.com
```

---

## 14) Deployment (Cloudflare Pages)

### Cloudflare Pages config

```toml
# wrangler.toml (if using Workers for redirects)
name = "prague"
compatibility_date = "2024-01-01"

[site]
bucket = "./dist"
```

Build command in this repo is typically `pnpm build:prague` (or `pnpm build` at the root).

### Headers

```
# _headers (Cloudflare Pages)
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin

/assets/*
  Cache-Control: public, max-age=31536000, immutable
```

### Redirects

```
# _redirects (Cloudflare Pages)
/widgets/*  /en/widgets/:splat  301
/compare/*  /en/compare/:splat  301
```

---

## 15) Success metrics

| Metric | Target |
|--------|--------|
| **Pages indexed** | 90%+ of generated pages |
| **Organic traffic** | Track growth month-over-month |
| **Keyword rankings** | Track top 100 keywords |
| **Minibob open rate** | > 10% of page visitors |
| **Signup conversion** | > 2% of Minibob opens |
| **Core Web Vitals** | All green in Search Console |

---

## 16) Dependencies

| Dependency | Purpose |
|------------|---------|
| **GTM Agent** | Creates/updates markdown files in `tokyo/widgets/*/pages/` |
| **i18n system** | Provides localized strings |
| **Tokyo** | Hosts GTM JSON and i18n catalogs |
| **Bob/Minibob** | Widget editor embedded on pages |
| **SDR Copilot** | Conversion agent in Minibob |
| **Cloudflare Pages** | Hosting and edge caching |

---

## 17) Out of scope

- Authenticated experiences (dashboards, user settings)
- CMS authoring UI (GTM Agent writes markdown files directly)
- Dynamic server-side rendering (SSG only)
- Third-party scripts (no marketing pixels without approval)
- E-commerce checkout (handled by Stripe via Bob)
- Storing translations in filesystem (D1 cache only)

---

## 18) Links

- `documentation/ai/agents/gtm.md` — Markdown file generator
- `documentation/ai/agents/sdr-copilot.md` — Conversion agent
- `documentation/capabilities/seo-geo.md` — SEO/GEO platform architecture
- `documentation/architecture/CONTEXT.md` — Platform overview
