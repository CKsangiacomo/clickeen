(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7320],{8812:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo/[alias]",function(){return i(21704)}])},21704:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return k},default:function(){return O}});var n,a,o=i(24246),s=i(27378),d=i(60074),r=i(38250),l=i(86387),u=i(50548),c=i(78228),p=i(19263),g=i(93989),f=i(18362),m=i(11163),x=i(93655),h=i(48645),w=i(86603);(n=a||(a={})).CONFIGURE="configure",n.INSTALL="install";let j=e=>{let{data:t,fromExistingWidget:i}=e,{query:n}=(0,m.useRouter)(),{override:d}=(0,w.lO)(),r=(0,w.dD)(),p=!!n.templatePid,{data:{payload:g}={payload:[]},isFetched:f}=(0,c.hA)(t.app.alias,!p),[j,N]=(0,s.useState)(!0),{setActiveTab:I}=(0,u.YE)(),{user:C}=(0,w.aF)(),_=n.language||(null==C?void 0:C.language)||"en";return p||f?(0,o.jsxs)(o.Fragment,{children:[j&&(0,o.jsx)(u.aN,{absolute:!0,large:!0}),(0,o.jsx)(l.z$,{...t.configuratorTemplateSelectorConfig,url:t.appRelease.configuratorURL,onCTARequest:()=>{(0,c._P)({name:"demo_cta_click",params:{app_name:t.app.name}}),I(a.INSTALL)},onHelpRequest:()=>{d({...x.widgetPageConfig,beaconHidden:!1}),h.N.openChat()},onReady:()=>N(!1),templates:g,settings:{...t.publishedWidgetRevision.settings,widgetId:t.pid},displayTemplates:!p&&!i,mobile:r,displayCTA:!0,demoMode:!0,requestFeatureLink:t.requestFeatureLink||void 0,widgetToken:t.publishedWidgetRevision.widgetToken,language:_,localizeOnInit:!0})]}):(0,o.jsx)(u.aN,{absolute:!0,large:!0})};var N=i(7133),I=i.n(N),C=i(61973),_=i(66537);let b=e=>{let{data:t,signUpFrameURL:i,widgetURL:n}=e,[a,d]=(0,s.useState)(!1),[r,u]=(0,s.useState)(!1),{getSettings:p}=(0,l.yl)(),{isAuthenticated:f}=(0,w.aF)(),m=(0,g.Kj)(),{mutate:x,isLoading:h}=(0,c.vc)(t.pid,{onSuccess:()=>{f&&(u(!0),(0,_.sy)(n,m.isWixSession?window:void 0))}});return I()(async()=>{x({settings:await p()}),f||d(!0)},[f]),(0,o.jsxs)(o.Fragment,{children:[(a||h||r)&&(0,o.jsxs)(E,{children:[(0,o.jsx)(L,{large:!0}),(0,o.jsx)(S,{children:"Saving your widgetâ€¦"})]}),!f&&(0,o.jsx)(v,{src:i,onLoad:()=>{d(!1)}})]})},L=(0,C.default)(u.aN).withConfig({componentId:"sc-a278dcd3-0"})(["flex-grow:0;"]),S=(0,C.default)(u.P).withConfig({componentId:"sc-a278dcd3-1"})(["height:18px;color:",";"],e=>{let{theme:t}=e;return t.colors.gray70}),E=C.default.div.withConfig({componentId:"sc-a278dcd3-2"})(["position:absolute;top:0;left:0;right:0;bottom:0;padding-top:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:",";"],e=>{let{theme:t}=e;return t.colors.white}),v=C.default.iframe.withConfig({componentId:"sc-a278dcd3-3"})(["display:block;width:100%;height:100%;border:none;"]);var R=i(31529),F=i(75601);function T(){let{activeTab:e,setActiveTab:t}=(0,u.YE)();return(0,o.jsx)(F.T$,{leftSlot:{[a.CONFIGURE]:null,[a.INSTALL]:(0,o.jsx)(u.hU,{large:!0,icon:R.Z,onClick:()=>t(a.CONFIGURE)})}[e],centerSlot:(0,o.jsx)(F.Gh,{children:{[a.CONFIGURE]:"Edit Widget",[a.INSTALL]:"Embed Code"}[e]})})}let y=[{title:"Configure",id:a.CONFIGURE},{title:"Install",id:a.INSTALL}];function W(e){let{data:t,fromExistingWidget:i}=e,n=(0,g.Kj)(),{data:s}=(0,c.z8)({appAlias:t.app.alias}),d=Number(null==s?void 0:s.widgetsCount)>=Number(null==s?void 0:s.widgetsLimit),m=(0,p.HN)(t.pid,{[p.Ms]:!0,...n.isWixSession?{wixWidgetId:n.wixWidgetId}:{}}),x=new URLSearchParams({hideBeacon:"true",replaceParentWindow:n.isWixSession?"parent":"top",redirectURL:m,demo:"true",demoAppAlias:t.app.alias,demoAppName:t.app.name,demoWidgetPid:t.pid,...n.isWixSession?{wixWidgetId:n.wixWidgetId,utm_source:"portals",utm_medium:"wix",utm_campaign:t.app.alias,utm_content:"signup-page"}:{}});return(0,o.jsx)(u.X,{defaultTab:a.CONFIGURE,tabs:y,children:(0,o.jsx)(l.$g,{children:(0,o.jsxs)(r.jj,{header:(0,o.jsx)(T,{}),children:[(0,o.jsx)(u.x4,{tabID:a.CONFIGURE,stayMounted:!0,children:(0,o.jsx)(j,{data:t,fromExistingWidget:i})}),(0,o.jsx)(u.x4,{tabID:a.INSTALL,children:(0,o.jsx)(b,{data:t,signUpFrameURL:"/sign-up?".concat(x),widgetURL:m})}),d&&(0,o.jsx)(f.kq,{app:t.app,isOpen:!0})]})})})}var A=i(54616);let U=e=>{let{errorCode:t,data:i,...n}=e;return((0,s.useEffect)(()=>{t&&(0,d.uT)("Failed to create widget","fatal")},[t]),t)?(0,o.jsx)(A.mf,{statusCode:t}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.dS,{title:"".concat(i.app.name," Demo")}),(0,o.jsx)(W,{data:i,...n})]})};U.config={guest:!0,beaconHidden:!0,offerHidden:!0,offerModalHidden:!0,onboardingModalHidden:!0,isWidgetConfigurationPage:!0};var k=!0,O=U},7133:function(e,t,i){"use strict";var n=i(27378);function a(e,t,i){var a="function"==typeof t;n.useEffect(function(){var i,n=!0;return Promise.resolve(e(function(){return n})).then(function(e){i=e}),function(){n=!1,a&&t(i)}},a?i:t)}e.exports=a,e.exports.useAsyncEffect=a}},function(e){e.O(0,[7019,7308,9774,2888,179],function(){return e(e.s=8812)}),_N_E=e.O()}]);
//# sourceMappingURL=[alias]-a23dfc44a3cc2f9e.js.map