@import '../button/button.css';
@import '../menuactions/menuactions.css';
@import '../popover/popover.css';
@import '../textfield/textfield.css';

.diet-dropdown-upload {
  position: relative;
  display: grid;
  gap: var(--hspace-2, 0.1rem);
  inline-size: 100%;
}

/* Shared dropdown header pattern (mirrors dropdown-fill / dropdown-actions). */
.diet-dropdown-upload .diet-dropdown-header {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--space-1);
  inline-size: 100%;
  min-inline-size: 0;
  min-block-size: var(--control-size-md, 1.5rem);
  padding-inline: var(--control-padding-inline);
  border-radius: var(--control-radius-md, 0.375rem);
  border: 1px solid transparent;
  background: var(--color-system-white);
  box-sizing: border-box;
  transition: background-color var(--duration-base, 160ms) ease, border-color var(--duration-base, 160ms) ease;
  cursor: pointer;
}

.diet-dropdown-upload .diet-dropdown-header:hover {
  background: color-mix(in oklab, var(--color-system-white), var(--color-system-black) 6%);
}

.diet-dropdown-upload .diet-dropdown-header:focus-visible {
  outline: none;
  background: var(--color-system-white);
  border-color: var(--color-system-blue);
}

.diet-dropdown-upload .diet-dropdown-header-label {
  flex: 0 0 auto;
}

.diet-dropdown-upload .diet-dropdown-header-value {
  flex: 1 1 auto;
  min-inline-size: 0;
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  justify-content: flex-start;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--color-system-black);
}

.diet-dropdown-upload .diet-dropdown-header-value[data-muted='true'] {
  color: color-mix(in oklab, var(--color-system-black), var(--state-muted-mix, 50%));
}

.diet-dropdown-upload[data-state='open'] .diet-dropdown-header {
  background: color-mix(in oklab, var(--color-system-white), var(--color-system-blue) 3%);
  border-color: var(--color-system-blue);
}

.diet-dropdown-upload__value-field {
  position: absolute;
  inset: 0;
  width: 0;
  height: 0;
  padding: 0;
  border: 0;
  opacity: 0;
  pointer-events: none;
}

.diet-dropdown-upload__label {
  flex: 1 1 auto;
  min-inline-size: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.diet-dropdown-upload__chip {
  display: block;
  inline-size: 14px;
  block-size: 14px;
  border-radius: 4px;
  background: transparent;
  box-sizing: border-box;
  flex: 0 0 auto;
}

.diet-dropdown-upload__chip.is-none {
  border: 1px solid color-mix(in oklab, var(--color-system-black), transparent 80%);
  background:
    linear-gradient(
      135deg,
      transparent 44%,
      color-mix(in oklab, var(--color-system-black), transparent 35%) 44%,
      color-mix(in oklab, var(--color-system-black), transparent 35%) 56%,
      transparent 56%
    ),
    color-mix(in oklab, var(--color-system-black), transparent 93%);
}

.diet-dropdown-upload__chip[hidden] {
  display: none;
}

.diet-dropdown-upload .diet-dropdown-header-value.has-chip {
  justify-content: flex-start;
}
.diet-dropdown-upload .diet-dropdown-header-value.has-chip .diet-dropdown-upload__label {
  order: 1;
}
.diet-dropdown-upload .diet-dropdown-header-value.has-chip .diet-dropdown-upload__chip {
  order: 2;
  margin-inline-start: auto;
  display: block;
}

.diet-dropdown-upload__popover {
  outline: none;
}

.diet-dropdown-upload__panel {
  padding: var(--space-1, 0.25rem) var(--space-1, 0.25rem) 0 var(--space-1, 0.25rem);
  border-radius: var(--control-radius-md, 0.375rem);
  background: var(--color-system-white);
  overflow: hidden;
  display: grid;
  gap: var(--space-3, 0.75rem);
}

.diet-dropdown-upload__preview-frame {
  inline-size: 100%;
  block-size: 160px;
  border-radius: var(--control-radius-md, 0.375rem);
  background: color-mix(in oklab, var(--color-system-black), transparent 93%);
  border: 1px dashed color-mix(in oklab, var(--color-system-black), transparent 70%);
  position: relative;
  overflow: hidden;
  display: grid;
  place-items: center;
}

.diet-dropdown-upload__preview-img {
  display: none;
  max-inline-size: 100%;
  max-block-size: 100%;
  object-fit: contain;
}

.diet-dropdown-upload__preview-video,
.diet-dropdown-upload__preview-doc,
.diet-dropdown-upload__preview-empty {
  display: none;
  inline-size: 100%;
  block-size: 100%;
  place-items: center;
}

.diet-dropdown-upload__preview-video-badge {
  padding: 6px 10px;
  border-radius: 9999px;
  background: color-mix(in oklab, var(--color-system-black), transparent 75%);
  color: var(--color-system-white);
}

.diet-dropdown-upload__preview-doc {
  gap: var(--space-2, 0.5rem);
  color: color-mix(in oklab, var(--color-system-black), transparent 35%);
  text-align: center;
}

.diet-dropdown-upload__preview-doc-icon,
.diet-dropdown-upload__preview-empty-icon {
  inline-size: 28px;
  block-size: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.diet-dropdown-upload__preview-meta {
  display: grid;
  gap: var(--space-1, 0.25rem);
}

.diet-dropdown-upload__preview-name {
  color: var(--color-system-black);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.diet-dropdown-upload__preview-error {
  color: color-mix(in oklab, var(--color-system-red), transparent 10%);
  min-block-size: 1em;
}

.diet-dropdown-upload__actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-2, 0.5rem);
}

.diet-dropdown-upload__upload-btn {
  flex: 1 1 auto;
  justify-content: center;
}

.diet-dropdown-upload__file-controls {
  display: flex;
  gap: var(--space-2, 0.5rem);
}

.diet-dropdown-upload__panel[data-has-file='false'] .diet-dropdown-upload__file-controls {
  display: none;
}

.diet-dropdown-upload__panel[data-has-file='true'] .diet-dropdown-upload__upload-btn {
  display: none;
}

.diet-dropdown-upload__file-input {
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
}

.diet-dropdown-upload__extras {
  padding: var(--space-2, 0.5rem);
  border-top: 1px solid color-mix(in oklab, var(--color-system-black), transparent 90%);
  display: grid;
  gap: var(--space-2, 0.5rem);
}

/* Kind switching (JS sets data-kind on the panel) */
.diet-dropdown-upload__panel[data-kind='image'] .diet-dropdown-upload__preview-img {
  display: block;
}
.diet-dropdown-upload__panel[data-kind='video'] .diet-dropdown-upload__preview-video {
  display: grid;
}
.diet-dropdown-upload__panel[data-kind='doc'] .diet-dropdown-upload__preview-doc {
  display: grid;
}
.diet-dropdown-upload__panel[data-kind='empty'] .diet-dropdown-upload__preview-empty {
  display: grid;
}
