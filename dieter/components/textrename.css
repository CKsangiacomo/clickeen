/* Dieter TextRename â€” view/edit inline rename control */

.diet-textrename {
  --rename-height: var(--control-size-xl, 2rem);
  --rename-radius: var(--control-radius-xl, 0.5rem);
  --rename-padding-inline: var(--control-padding-inline, var(--space-3, 0.75rem));
  --rename-hover-bg: color-mix(in oklab, var(--color-text), transparent 88%);
  --rename-active-bg: color-mix(in oklab, var(--color-text), transparent 75%);
  --rename-color: var(--color-text);
  display: inline-grid;
  grid-template-areas: 'rename';
  align-items: center;
  color: var(--rename-color);
}

.diet-textrename[data-size="md"] {
  --rename-height: var(--control-size-md, 1.5rem);
  --rename-radius: var(--control-radius-md, 0.375rem);
}

.diet-textrename[data-size="lg"] {
  --rename-height: var(--control-size-lg, 1.75rem);
  --rename-radius: var(--control-radius-lg, 0.4375rem);
}

.diet-textrename[data-size="xl"] {
  --rename-height: var(--control-size-xl, 2rem);
  --rename-radius: var(--control-radius-xl, 0.5rem);
}

.diet-textrename__view,
.diet-textrename__edit {
  grid-area: rename;
}

.diet-textrename__view {
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  min-height: var(--rename-height);
  padding-inline: var(--rename-padding-inline);
  padding-block: 0;
  border: 0;
  border-radius: var(--rename-radius);
  background: transparent;
  color: inherit;
  cursor: pointer;
  outline: none;
  user-select: none;
  transition:
    background-color 150ms ease,
    color 150ms ease,
    box-shadow 150ms ease,
    transform 150ms ease;
}

.diet-textrename__label {
  white-space: nowrap;
}

.diet-textrename__view:hover {
  background: var(--rename-hover-bg);
}

.diet-textrename__view:active {
  background: var(--rename-active-bg);
  transform: translateY(1px);
}

.diet-textrename__view:focus-visible {
  box-shadow:
    0 0 0 var(--focus-ring-offset, 2px) var(--color-bg, #ffffff),
    0 0 0 calc(var(--focus-ring-offset, 2px) + var(--focus-ring-width, 2px)) var(--focus-ring-color, var(--color-accent));
}

.diet-textrename__edit {
  display: none;
}

.diet-textrename[data-state="view"] .diet-textrename__view {
  display: inline-flex;
}

.diet-textrename[data-state="view"] .diet-textrename__edit {
  display: none;
}

.diet-textrename__input {
  inline-size: 100%;
  min-height: var(--rename-height);
  padding-inline: var(--rename-padding-inline);
  padding-block: 1px 0;
  border-radius: var(--rename-radius);
  border: 1px solid color-mix(in oklab, var(--role-border), transparent 35%);
  background: var(--role-surface-bg);
  color: var(--rename-color);
  box-sizing: border-box;
  outline: none;
  caret-color: var(--rename-color);
  transition:
    border-color 150ms ease,
    background-color 150ms ease,
    box-shadow 150ms ease;
}

.diet-textrename__input::placeholder {
  font: inherit;
  color: color-mix(in oklab, var(--rename-color), transparent 50%);
}

.diet-textrename__input:focus::placeholder {
  color: transparent;
  opacity: 0;
}

.diet-textrename__input:focus,
.diet-textrename__input:active {
  border-color: var(--color-system-blue);
  background: var(--color-system-white);
  box-shadow: none;
}

.diet-textrename__input:focus-visible {
  box-shadow: none;
}

.diet-textrename[data-state="editing"] .diet-textrename__view {
  display: none;
}

.diet-textrename[data-state="editing"] .diet-textrename__edit {
  display: block;
}

@media (prefers-reduced-motion: reduce) {
  .diet-textrename__view,
  .diet-textrename__input { transition: none; }
}
