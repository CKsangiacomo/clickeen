/* Dieter Textfield â€” tokenized input control */
.diet-textfield {
  display: grid;
  gap: var(--hspace-2, 0.1rem);
  color: var(--color-system-black);
  width: 100%;
}

.diet-textfield__display-label {
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.diet-textfield__display-label.is-hidden {
  display: none;
}

.diet-textfield__control,
.diet-textfield__inner {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--space-1);
  inline-size: 100%;
  min-inline-size: 0;
  min-block-size: var(--control-size-md, 1.5rem);
  padding-inline: var(--control-padding-inline);
  border-radius: var(--control-radius-md, 0.375rem);
  border: 1px solid transparent;
  background: var(--color-system-gray-6);
  box-sizing: border-box;
  transition: background-color var(--duration-base, 160ms) ease, border-color var(--duration-base, 160ms) ease;
  cursor: text;
}

.diet-textfield__control:hover,
.diet-textfield__inner:hover {
  background: color-mix(in oklab, var(--color-system-gray-6), var(--color-system-black) 6%);
}

.diet-textfield__control:focus-within,
.diet-textfield__inner:focus-within {
  background: var(--color-system-white);
  border-color: var(--color-system-blue);
}

.diet-textfield__control:focus-within .diet-textfield__display-label,
.diet-textfield__inner:focus-within .diet-textfield__display-label {
  display: none;
}

.diet-textfield__field {
  flex: 1 1 auto;
  min-inline-size: 0;
  border: none;
  background: transparent;
  color: var(--color-system-black);
  padding: 0;
  min-block-size: auto;
  outline: none;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.diet-textfield__field::placeholder {
  color: color-mix(in oklab, var(--color-system-black), transparent 45%);
}

.diet-textfield__field:disabled {
  cursor: not-allowed;
  color: color-mix(in oklab, var(--color-system-black), transparent 40%);
}

.diet-textfield__helper {
  display: block;
  margin-top: var(--hspace-4, 0.3rem);
  /* Typography/color comes from the global .caption utility */
}

/* Size modifiers */

.diet-textfield[data-size="sm"] .diet-textfield__control,
.diet-textfield[data-size="sm"] .diet-textfield__inner {
  min-block-size: var(--control-size-sm, 1.25rem);
  border-radius: var(--control-radius-sm, 0.25rem);
}

.diet-textfield[data-size="md"] .diet-textfield__control,
.diet-textfield[data-size="md"] .diet-textfield__inner {
  min-block-size: var(--control-size-md, 1.5rem);
  border-radius: var(--control-radius-md, 0.25rem);
}

.diet-textfield[data-size="lg"] .diet-textfield__control,
.diet-textfield[data-size="lg"] .diet-textfield__inner {
  min-block-size: var(--control-size-lg, 1.75rem);
  border-radius: var(--control-radius-lg, 0.3125rem);
}

@media (prefers-reduced-motion: reduce) {
  .diet-textfield__field { transition: none; }
}

@media (prefers-color-scheme: dark) {
  .diet-textfield__control,
  .diet-textfield__inner {
    background: var(--color-system-gray-5);
  }
}

.diet-textfield__inner .diet-textfield__field,
.diet-textfield__control .diet-textfield__field {
  border: none;
  background: transparent;
  padding-block: 0;
  padding-inline: 0;
  min-block-size: auto;
  flex: 1 1 0;
  min-inline-size: 0;
}

.diet-textfield__icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  inline-size: var(--icon-size-12, 0.75rem);
  block-size: var(--icon-size-12, 0.75rem);
  color: color-mix(in oklab, var(--color-system-black), transparent 40%);
  flex: none;
  opacity: 0;
  pointer-events: none;
  transition:
    opacity var(--duration-base, 160ms) ease,
    color var(--duration-base, 160ms) ease;
}

.diet-textfield[data-size="lg"] .diet-textfield__icon {
  inline-size: var(--icon-size-16, 1rem);
  block-size: var(--icon-size-16, 1rem);
}

.diet-textfield__icon svg {
  inline-size: 100%;
  block-size: 100%;
  display: block;
}

.diet-textfield__inner > button.diet-textfield__icon,
.diet-textfield__control > button.diet-textfield__icon {
  border: 0;
  background: transparent;
  padding: 0;
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
}

.diet-textfield__control:hover .diet-textfield__icon,
.diet-textfield__inner:hover .diet-textfield__icon {
  opacity: 1;
  pointer-events: auto;
  color: var(--color-system-blue);
}
