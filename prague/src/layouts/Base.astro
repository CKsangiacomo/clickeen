---
type Props = {
  title: string;
  description?: string;
  locale?: string;
};

const { title, description, locale } = Astro.props;

const TOKYO_URL = import.meta.env.PUBLIC_TOKYO_URL;
if (!TOKYO_URL) {
  throw new Error('[prague] PUBLIC_TOKYO_URL is required (e.g. https://tokyo.dev.clickeen.com)');
}
const TOKENS_HREF = `${TOKYO_URL.replace(/\/$/, '')}/dieter/tokens/tokens.css`;

const isDevProject = (process.env.CF_PAGES_PROJECT_NAME || '').endsWith('-dev');
---

<!doctype html>
<html lang={locale ?? 'en'}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    {isDevProject ? <meta name="robots" content="noindex,nofollow" /> : null}
    <title>{title}</title>
    {description ? <meta name="description" content={description} /> : null}
    <link rel="stylesheet" href={TOKENS_HREF} />
    <link rel="stylesheet" href="/styles/layout.css" />
    <link rel="stylesheet" href="/styles/primitives.css" />
    <link rel="stylesheet" href="/styles/elements.css" />
    <link rel="stylesheet" href="/styles/base.css" />
  </head>
  <body>
    <slot />
  </body>
</html>
