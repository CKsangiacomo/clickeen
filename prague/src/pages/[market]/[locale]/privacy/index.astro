---
export const prerender = false;

import Base from '../../../../layouts/Base.astro';
import Nav from '../../../../blocks/site/nav/Nav.astro';
import Footer from '../../../../blocks/site/footer.astro';
import { getPragueMarket, toMarketHreflang } from '../../../../lib/markets';

const url = Astro.url;
if (!url.pathname.endsWith('/')) {
  return Astro.redirect(`${url.pathname}/${url.search}`, 301);
}

const { market, locale } = Astro.params;
const marketKey = String(market || '').trim().toLowerCase();
const localeKey = String(locale || '').trim().toLowerCase();

const marketConfig = getPragueMarket(marketKey);
if (!marketConfig) {
  return Astro.redirect(`/${url.search}`, 302);
}
if (!marketConfig.locales.includes(localeKey)) {
  return Astro.redirect(`/${marketConfig.key}/${marketConfig.defaultLocale}/privacy/${url.search}`, 302);
}

const canonicalPath = `/${marketConfig.key}/${localeKey}/privacy/`;
const alternates = [
  ...marketConfig.locales.map((l) => ({
    hreflang: toMarketHreflang({ locale: l, country: marketConfig.country }),
    href: `/${marketConfig.key}/${l}/privacy/`,
  })),
  { hreflang: 'x-default', href: `/${marketConfig.key}/${marketConfig.defaultLocale}/privacy/` },
];
---

<Base title="Privacy Policy — Clickeen" locale={localeKey} canonicalPath={canonicalPath} alternates={alternates}>
  <main>
    <Nav
      title="Clickeen"
      market={marketConfig.key}
      locale={localeKey}
      homeHref={`/${marketConfig.key}/${localeKey}/`}
      cta={{ label: 'Create free', href: `/${marketConfig.key}/${localeKey}/create`, variant: 'primary' }}
    />

    <section class="ck-canvas" style="padding-top: 0;">
      <div class="ck-inline ck-stack" style="gap: var(--space-6); max-width: 920px;">
        <header class="ck-stack" style="gap: var(--space-2);">
          <h1 class="heading-1" style="margin: 0; letter-spacing: -0.02em;">Privacy Policy</h1>
          <p class="body-xxl" style="margin: 0; color: color-mix(in oklab, var(--color-system-black), transparent 56%);">
            Last updated: 2026-01-07
          </p>
        </header>

        <div class="ck-stack" style="gap: var(--space-6);">
          <section class="ck-stack" style="gap: var(--space-2);">
            <h2 class="heading-3" style="margin: 0;">Scope</h2>
            <p class="body-xxl" style="margin: 0;">
              This Privacy Policy describes how Clickeen handles data when you use our website and our AI-powered experiences
              (including investor-facing chat experiences).
            </p>
          </section>

          <section class="ck-stack" style="gap: var(--space-2);">
            <h2 class="heading-3" style="margin: 0;">Custom GPT Actions (Pitch Agent)</h2>
            <p class="body-xxl" style="margin: 0;">
              If you use a Clickeen Custom GPT that calls our API via “Actions”, your prompt and related metadata may be sent to our
              Pitch Worker endpoint to retrieve relevant documentation and produce a response with citations.
            </p>
            <ul class="body-xxl" style="margin: 0; padding-left: 1.25rem;">
              <li>
                <strong>What is sent:</strong> your query (and optional locale/top_k parameters).
              </li>
              <li>
                <strong>What it is used for:</strong> retrieving relevant passages and generating an answer grounded in those sources.
              </li>
              <li>
                <strong>Third parties:</strong> our Pitch Worker may call an LLM provider (e.g. OpenAI) to generate responses.
              </li>
            </ul>
          </section>

          <section class="ck-stack" style="gap: var(--space-2);">
            <h2 class="heading-3" style="margin: 0;">Data retention</h2>
            <p class="body-xxl" style="margin: 0;">
              We aim to minimize retained personal data. Operational logs may be retained for security, reliability, and audit
              purposes.
            </p>
          </section>

          <section class="ck-stack" style="gap: var(--space-2);">
            <h2 class="heading-3" style="margin: 0;">Contact</h2>
            <p class="body-xxl" style="margin: 0;">
              For privacy questions, contact: <a href="mailto:privacy@clickeen.com">privacy@clickeen.com</a>
            </p>
          </section>
        </div>
      </div>
    </section>

    <Footer market={marketConfig.key} locale={localeKey} />
  </main>
</Base>
